$(function(){

  // Set global config
  Snapper.configure({
    camera_security_type: 'remember',
    snapper_size: 'tiny', // set the default snapper size to tiny
    snapper_border: 'square shadow', // render snapper with a round corners and a shadow
    output_format: 'png', // switch from 'jpg' to use 'png' when saving.
    hide_effect_btn: true
    // see configuration section of docs for full list.
  });

  // Load snapper when a button is clicked
  $('#take_photo').click(function(){
    Snapper.show({ // open snapper in an overlay window
      complete: function(image){ // called when the photo has been saved
        // e.g. set value of hidden form element
        saveImage(image)


        $('#saved_image').val(image);
      },
      // instance config
       // override the default size, set it to medium
    });
  });
  // function saveImage(image){
  //   $.ajax({url: "/photos", type: "POST", data: { photo: {photo_url: image}}});
  // }
  // Embed snapper into the page
  Snapper.embed({ // renders snapper in the page
    target: 'take_photo', // pass the ID of the div where you want snapper to embed
    complete: function(image){ // called when the photo has been saved
      // e.g. ajax call to save photo on server
      saveImage(image)
      $.post('/my_save_handler', {snap: image}, function(){
        alert('Snap saved');
      });
    },

    // instance config
    camera_security_type: 'remember',
    snapper_size: 'huge',
    output_format: 'jpg', // set output format to jpg
    jpg_quality: 90, // use high quality
    hide_effect_btn: true
  });
  function saveImage(image){
    $.ajax({url: "/photos", type: "POST", data: { photo: {photo_url: image}}});
  }
  $('.beauty div.end').css({"width": gon.beauty + "%"});
  $('.race div.end').css({"width": gon.race_percentage + "%"})
  $('.emotion-1 div.end').css({"width": gon.emotion1value + "%"})
  $('.emotion-2 div.end').css({"width": gon.emotion2value + "%"})
  $('.emotion-3 div.end').css({"width": gon.emotion3value + "%"})
});
